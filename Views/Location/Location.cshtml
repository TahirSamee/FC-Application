@model IEnumerable<Location>
@{
    ViewData["Title"] = "Location";
    var page = ViewBag.Page ?? 1;
    var totalPages = ViewBag.TotalPages ?? 1;
    var pageSize = ViewBag.PageSize ?? 10;
    var search = ViewBag.Search ?? "";
}

<style>
    .pagination .page-link {
        transition: 0.2s ease-in-out;
        padding: 6px 12px;
        box-shadow: none;
    }

        .pagination .page-link:hover {
            background-color: #f0f0f0;
            color: #000;
        }

    .pagination .page-item.active .page-link {
        background-color: #0d6efd;
        color: white;
        font-weight: 500;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
    }
</style>
<div class="content">
    <div class="block block-rounded shadow-sm border">
        <div class="block-header block-header-default bg-primary text-white d-flex justify-content-between align-items-center">
            <h3 class="block-title mb-0">Location</h3>
            <a asp-controller="Location" asp-action="LocationCreate" class="btn btn-light btn-sm text-primary">
                <i class="fa fa-plus me-1"></i> Create Location
            </a>
        </div>

        <div class="block-content p-3">
            <form asp-action="Location" method="get" class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
                <div class="d-flex align-items-center gap-2">
                    <label class="mb-0 small fw-semibold text-muted">Show:</label>
                    <select name="pageSize" class="form-select form-select-sm w-auto" onchange="this.form.submit()">
                        <option value="10" selected="@((int)pageSize == 10)">10</option>
                        <option value="20" selected="@((int)pageSize == 20)">20</option>
                        <option value="50" selected="@((int)pageSize == 50)">50</option>
                    </select>
                </div>
                <div>
                    <input type="search" name="search" class="form-control form-control-sm" value="@search" placeholder="Search..." style="width: 180px;" />
                </div>
            </form>

            @* <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
                <div class="d-flex align-items-center gap-2">
                    <label class="mb-0 small fw-semibold text-muted">Show:</label>
                    <select class="form-select form-select-sm w-auto">
                        <option>10</option>
                        <option>20</option>
                        <option>50</option>
                    </select>
                </div>
                <div>
                    <input type="search" class="form-control form-control-sm" placeholder="Search..." style="width: 180px;" />
                </div>
            </div> *@

            <!-- Table -->
            <div class="table-responsive table-responsive-sticky text-center p-0 m-0 rounded">
                <table class="table table-sm table-hover align-middle table-bordered mb-0">
                    <thead class="table-dark text-center text-nowrap sticky-top">
                        <tr>
                            <th>#</th>
                            <th>Surveyor</th>
                            <th>Location ID</th>
                            <th>Order ID</th>
                            <th>Client Identifier</th>
                            <th>Status</th>
                            <th>Due Date</th>
                            <th>Service Date</th>
                            <th>Client</th>
                            <th>Customer</th>
                            <th>Brand</th>
                            <th>Location #</th>
                            <th>Nickname</th>
                            <th>Service</th>
                            <th>Address</th>
                            <th>City</th>
                            <th>State</th>
                            <th>ZIP</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>Manager</th>
                            <th>L1 Manager</th>
                            <th>L1 Email</th>
                            <th>L1 Phone</th>
                            <th>L2 Manager</th>
                            <th>L2 Email</th>
                            <th>L2 Phone</th>
                            <th>Verified</th>
                            <th># Assets</th>
                            <th>Sq Ft</th>
                            <th>Value</th>
                            <th>Notes</th>
                            <th>Verifier</th>
                            <th>Verified Date</th>
                            @* <th class="d-none d-sm-table-cell">Access</th> *@
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody class="text-center text-nowrap p-0 m-0 align-middle">
                        @if (!Model.Any())
                        {
                            <tr><td colspan="36" class="text-center text-muted">No records found.</td></tr>
                        }
                        else
                        {
                            int rowNum = ((int)page - 1) * (int)pageSize;
                            foreach (var loc in Model)
                            {
                                <tr>
                                    <th scope="row">@(++rowNum)</th>
                                    <td>@loc.SurveyorName</td>
                                    <td>@loc.LocationID</td>
                                    <td>@loc.SalesOrderID</td>
                                    <td>@loc.ClientLocationIdentifier</td>
                                    <td><span class="badge bg-info">@loc.Status</span></td>
                                    <td>@loc.ServiceDueDate</td>
                                    <td>@loc.ServiceDate</td>
                                    <td>@loc.Client</td>
                                    <td>@loc.Customer</td>
                                    <td>@loc.BrandName</td>
                                    <td>@loc.LocationNumber</td>
                                    <td>@loc.LocationNickname</td>
                                    <td>@loc.Service</td>
                                    <td>@loc.Address</td>
                                    <td>@loc.City</td>
                                    <td>@loc.State</td>
                                    <td>@loc.Zip</td>
                                    <td>@loc.PhoneNumber</td>
                                    <td>@loc.Email</td>
                                    <td>@loc.ManagerName</td>
                                    <td>@loc.L1ManagerName</td>
                                    <td>@loc.L1ManagerEmail</td>
                                    <td>@loc.L1ManagerPhone</td>
                                    <td>@loc.L2ManagerName</td>
                                    <td>@loc.L2ManagerEmail</td>
                                    <td>@loc.L2ManagerPhone</td>
                                    <td>@loc.AssetsVerified</td>
                                    <td>@loc.AssetCount</td>
                                    <td>@loc.SqFt</td>
                                    <td>@loc.Value</td>
                                    <td>@loc.Notes</td>
                                    <td>@loc.Verifier</td>
                                    <td>@loc.DateVerified</td>
                                   @*  <td class="d-none d-sm-table-cell"><span class="badge bg-warning text-dark">Trial</span></td> *@
                                    <td>
                                        <div class="btn-group">
                                            <a asp-action="LocationEdit" asp-route-SrNo="@loc.SrNo" class="btn btn-sm btn-primary" data-bs-toggle="tooltip" title="Edit">
                                                <i class="fa fa-pencil-alt"></i>
                                            </a>
                                            <a asp-action="LocationDelete" asp-route-SrNo="@loc.SrNo" class="btn btn-sm btn-danger" data-bs-toggle="tooltip" title="Delete">
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>

                    @* <tbody class="text-center text-nowrap p-0 m-0 align-middle">
                        <tr>
                            <th scope="row">1</th>
                            <td>John Doe</td>
                            <td>123</td>
                            <td>456789</td>
                            <td>CL123</td>
                            <td><span class="badge bg-success">Completed</span></td>
                            <td>2025-07-15</td>
                            <td>2025-07-16</td>
                            <td>Acme Corp</td>
                            <td>Jane Smith</td>
                            <td>BrandX</td>
                            <td>LOC789</td>
                            <td>Main Office</td>
                            <td>Cleaning</td>
                            <td>123 Main St</td>
                            <td>Springfield</td>
                            <td>IL</td>
                            <td>62701</td>
                            <td>555-1234</td>
                            <td>email@example.com</td>
                            <td>Mike Manager</td>
                            <td>Susan Lead</td>
                            <td>susan@example.com</td>
                            <td>555-5678</td>
                            <td>Tom Director</td>
                            <td>tom@example.com</td>
                            <td>555-9012</td>
                            <td><span class="badge bg-info text-dark">Yes</span></td>
                            <td>24</td>
                            <td>1500</td>
                            <td>$12,000</td>
                            <td>All good.</td>
                            <td>Alice Auditor</td>
                            <td>2025-07-17</td>
                            <td class="d-none d-sm-table-cell">
                                <span class="badge bg-warning text-dark">Trial</span>
                            </td>
                            <td>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="tooltip" title="Edit">
                                        <i class="fa fa-pencil-alt"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="tooltip" title="Delete">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody> *@
                </table>
            </div>
        </div>
        <div class="block-content block-content-full block-content-sm bg-white fs-sm border-top">
        <nav aria-label="Page navigation">
    <ul class="pagination pagination-sm justify-content-end mb-0">
        <li class="page-item @(page <= 1 ? "disabled" : "")">
                    <a class="page-link shadow-sm" href="@Url.Action("Location", new { search = search, page = page - 1, pageSize = pageSize })">
                <i class="fa fa-angle-left"></i>
            </a>
        </li>
        @for (int i = 1; i <= totalPages; i++)
        {
            <li class="page-item @(i == page ? "active" : "")">
                <a class="page-link @(i == page ? "bg-primary text-white border-0" : "") shadow-sm"
                           href="@Url.Action("Location", new { search = search, page = i, pageSize = pageSize })">@i</a>
            </li>
        }
        <li class="page-item @(page >= totalPages ? "disabled" : "")">
                    <a class="page-link shadow-sm" href="@Url.Action("Location", new { search = search, page = page + 1, pageSize = pageSize })">
                <i class="fa fa-angle-right"></i>
            </a>
        </li>
    </ul>
</nav>
        </div>

        <!-- Pagination -->
        @* <div class="block-content block-content-full block-content-sm bg-white fs-sm border-top">
            <nav aria-label="Page navigation">
                <ul class="pagination pagination-sm justify-content-end mb-0">
                    <li class="page-item disabled">
                        <a class="page-link shadow-sm" href="javascript:void(0)" aria-label="Previous">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    </li>
                    <li class="page-item active">
                        <a class="page-link bg-primary text-white shadow-sm border-0" href="javascript:void(0)">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link shadow-sm" href="javascript:void(0)">2</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link shadow-sm" href="javascript:void(0)">3</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link shadow-sm" href="javascript:void(0)" aria-label="Next">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </div> *@

    </div>
</div>

